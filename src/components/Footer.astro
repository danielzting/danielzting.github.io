<footer>
    <a href="/rss.xml">RSS Feed</a>
    <span>â€§</span>
    <a rel="license" href="/license">CC BY-SA 4.0</a>
    <a id="darkmode-toggle">Toggle Theme</a>
</footer>

<style>
    html.dark footer {
        font-family: "Times New Roman Compressed", "Times New Roman", serif;
        text-transform: uppercase;
    }

    #darkmode-toggle {
        float: right;
        text-decoration: underline;
        cursor: pointer;
    }
</style>

<script>
    function updateGiscusTheme(theme: string) {
        const iframe = document.querySelector(
            "iframe.giscus-frame",
        ) as HTMLIFrameElement;
        iframe?.contentWindow?.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app",
        );
    }

    function toggleListener() {
        const toggle = document.getElementById(
            "darkmode-toggle",
        ) as HTMLInputElement;
        toggle.addEventListener("click", () => {
            if (document.documentElement.classList.contains("dark")) {
                localStorage.setItem("lightTheme", "true");
                document.documentElement.classList.remove("dark");
                updateGiscusTheme("gruvbox_light");
            } else {
                localStorage.removeItem("lightTheme");
                document.documentElement.classList.add("dark");
                updateGiscusTheme("gruvbox_dark");
            }
        });
    }
    document.addEventListener("astro:page-load", toggleListener);
</script>
